This is version 0.50 of AcePerl, a Perl interface for the ACEDB
object-oriented database.  The code is currently in alpha stage, which
means the interface may change without warning.  Beware!

INSTALLATION:

You will need ACEDB 4.5e or higher.  If you are using a stock 4.5e
distribution you will need to apply a small patch that fixes a minor
bug on Linux systems, and adds two new targets to the makefile,
"libacecl.a" and "libace.a".  These two library files are needed to
compile AcePerl.  The patch is contained in the file acedb_4_5e.patch.

In the instructions that follow, the variable $ACEDB means the ACEDB
build directory, and $ACEPERL means the AcePerl directory (the
directory this file is located in.)  This is for simplification of the
instructions only.  You do not need to create environment variables
with these names.

A. Build and install the ace libraries and header file:
  1. cd $ACEDB
  2. patch < $ACEPERL/acedb_4_5e.patch
  3. setenv ACEDB_MACHINE <<your machine architecture>>
  4. make libacecl.a libace.a

B. Building AcePerl
  1. cd $ACEPERL
  2. perl Makefile.PL
     The Makefile.PL script will search for the location of the
     ace library and header files.  If it can't find them, enter
     the path to the directories in which they 
     can be found ($ACEDB/bin.<<architecture> and $ACEDB/wh
     respectively.)
  3. make
  4. make test (optional, see below)
  5. make install

You may "make test" to test the system.  It will attempt to open a
connection to a database at beta.crbm.cnrs-mop.fr:20000100.  You may
change these defaults by setting the environment variables ACEDB_HOST
and ACEDB_PORT.  However, since some of the tests are dependent on
specific values in the database, this may cause some tests to fail.
Do not be alarmed.

You may need to be root (superuser) in order to "make install".  This
is because Perl will want to install the newly-built files into its
library tree, /usr/local/lib/perl5/site_perl (or something similar),
and this tree is usually not writable by mere mortals.  Do not
despair: see section (D) below.

If you are using ACEDB 4.6 or higher, AcePerl is included with the
distribution and will be built automatically when you build ACE.  In
keeping with the Ace build strategy, when AcePerl is built in context
with ACEDB, its library files are installed in
$ACEDB/bin.<<architecture>>.  To use AcePerl within your scripts, you
will have to tell your scripts where they can find the library files,
or move these files to the main Perl library tree.  See section (D)
for the details.

C. Read the copious documentation
   
   perldoc Ace

D. Installing AcePerl in a non-standard location

By default, Perl will install AcePerl's library files within the
site-specific subdirectory of its library tree, usually
/usr/local/lib/perl5/site_perl.  If you wish, you can install the
library files elsewhere.

Simply change to the AcePerl distribution directory and run the
Makefile.PL script with the INSTALLSITELIB switch set to the full path 
of the directory you want to install into:

  perl Makefile.PL INSTALLSITELIB=/path/to/library

Then "make" and "make install" as described before.  You will now have
to tell Perl where to find AcePerl.  You can do this on a
script-by-script basis, or by defining an environment variable that
will affect all scripts.

To tell a single script where to find AcePerl, add a "use lib" line
to your script.  Put it _before_ the "use Ace" line:

  use lib /path/to/library;
  use Ace;

To change Perl's library search path so that it finds AcePerl
automatically, define the PERL5LIB environment variable in your
.login, .cshrc or .profile script.  PERL5LIB is a colon-delimited list 
of directories in which Perl will search for included libraries.  For
example:

  setenv PERL5LIB "/path/to/library";

If AcePerl was built as part of the main Ace distribution, you will
want to define PERL5LIB to be the location of the machine-specific 
build directory.  For example:

  setenv PERL5LIB $HOME/ace/bin.LINUX_4_OPT

Or you could reinstall AcePerl in the main Perl library tree just by
entering the wperl/ subdirectory, and rerunning "perl Makefile.PL"
without defining INSTALLSITELIB.

E. Install an Ace server, if you haven't already.  

Here's my configuration:

* /etc/rpc: 
... lots of existing entries...
stlace4		200001

* /etc/inetd.conf:
... lots of existing entries...
stlace4/1  stream  rpc/tcp wait acedb  /usr/local/bin/aceserver 
        aceserver /local/db/wustl 200001 1200:1200:0

The line has been wrapped to fit on the page.  All inetd.conf entries
should be on a single line.  Replace /usr/local/bin/aceserver with the 
location of your aceserver binary, and /local/db/wustl with the
location of your ACE database.  

You may need to kill the inetd daemon completely and restart it in
order to have the server come up correctly the first time.  At least I 
did.  After that it will come up whenever it is needed.  Don't worry
too much about picking the timeouts.  My version of portmapper is kind 
enough to keep the aceserver running at all times -- yours probably
will too.

The examples/ subdirectory contains some example scripts that fetch
data from a database in France.  You'll also find there a program
called "ace.pl" which sets up a small command shell for interacting
with an ace server.  If you have Perl readline installed, you even get 
the benefits of command-line editing and command completion!


Lincoln Stein
lstein@cshl.org

February 26, 1998
