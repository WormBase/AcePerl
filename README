This is version 1.43 of AcePerl, a Perl interface for the ACEDB
object-oriented database.  The code is currently in beta stage, which
means the interface will not change.  However, it may still contain
bugs.

See the ChangeLog for important notices, including user interfaces
changes.

INSTALLATION:

You will need ACEDB 4.5e or higher.  If you are using a stock 4.5e
distribution you will need to apply a patchfile that fixes a number of
bugs, enhances the GIF generating facilities, and adds two new targets
to the makefile, "libacecl.a" and "libace.a".  These two library files
are needed to compile AcePerl.  The patch is contained in the file
acedb_4_5e.patch.

In the instructions that follow, the variable $ACEDB means the ACEDB
build directory, and $ACEPERL means the AcePerl directory (the
directory this file is located in.)  This is for simplification of the
instructions only.  You do not need to create environment variables
with these names.


A. Build and install the ace libraries and header file:
  1. cd $ACEDB
  2. patch -p0 < $ACEPERL/acedb_4_5e.patch
  3. ln -s wmake/makefile makefile
  4. setenv ACEDB_MACHINE <<your machine architecture>>
  5. make libacecl.a libace.a


B. Building AcePerl
  1. cd $ACEPERL
  2. perl Makefile.PL
     The Makefile.PL script will search for the location of the
     ace library and header files.  If it can't find them, enter
     the path to the directories in which they 
     can be found ($ACEDB/bin.<<architecture> and $ACEDB/wh
     respectively.)
  3. make
  4. make test (optional, see below)
  5. make install

You may "make test" to test the system.  It will attempt to open a
connection to a database at beta.crbm.cnrs-mop.fr:20000100.  You may
change these defaults by setting the environment variables ACEDB_HOST
and ACEDB_PORT, or by defining them on the command line, as in:

   make test ACEDB_HOST=localhost ACEDB_PORT=200005

 However, since some of the tests are dependent on specific values in
the database, this may cause some tests to fail.  Do not be alarmed if
a handful of tests fail.  Do be alarmed if all of the tests fail.

You may need to be root (superuser) in order to "make install".  This
is because Perl will want to install the newly-built files into its
library tree, /usr/local/lib/perl5/site_perl (or something similar),
and this tree is usually not writable by mere mortals.  Do not
despair: see section (D) below.

If you are using ACEDB 4.6 or higher, AcePerl is included with the
distribution and will be built automatically when you build ACE.  In
keeping with the Ace build strategy, when AcePerl is built in context
with ACEDB, its library files are installed in
$ACEDB/bin.<<architecture>>.  To use AcePerl within your scripts, you
will have to tell your scripts where they can find the library files,
or move these files to the main Perl library tree.  See section (E)
for the details.

C. Installing AcePerl in a non-standard location

By default, Perl will install AcePerl's library files within the
site-specific subdirectory of its library tree, usually
/usr/local/lib/perl5/site_perl.  If you wish, you can install the
library files elsewhere.

Simply change to the AcePerl distribution directory and run the
Makefile.PL script with the INSTALLSITELIB switch set to the full path 
of the directory you want to install into:

  perl Makefile.PL INSTALLSITELIB=/path/to/library

Then "make" and "make install" as described before.  You will now have
to tell Perl where to find AcePerl.  You can do this on a
script-by-script basis, or by defining an environment variable that
will affect all scripts.

To tell a single script where to find AcePerl, add a "use lib" line
to your script.  Put it _before_ the "use Ace" line:

  use lib /path/to/library;
  use Ace;

To change Perl's library search path so that it finds AcePerl
automatically, define the PERL5LIB environment variable in your
.login, .cshrc or .profile script.  PERL5LIB is a colon-delimited list 
of directories in which Perl will search for included libraries.  For
example:

  setenv PERL5LIB "/path/to/library";

If AcePerl was built as part of the main Ace distribution, you will
want to define PERL5LIB to be the location of the machine-specific 
build directory.  For example:

  setenv PERL5LIB $HOME/ace/bin.LINUX_4_OPT

Or you could reinstall AcePerl in the main Perl library tree just by
entering the wperl/ subdirectory, and rerunning "perl Makefile.PL"
without defining INSTALLSITELIB.


D. Install an Ace server, if you haven't already.  

Here's my configuration:

* /etc/rpc: 
... lots of existing entries...
elegans		200005

* /etc/inetd.conf:
... lots of existing entries...
elegans/1  stream  rpc/tcp wait acedb  /usr/local/bin/gifaceserver 
        aceserver /local/db/elegans 200005 1200:1200:0

The line has been wrapped to fit on the page.  All inetd.conf entries
should be on a single line.  Replace /usr/local/bin/gifaceserver with
the location of your aceserver binary, and /local/db/elegans with the
location of your ACE database.

You may need to kill the inetd daemon completely and restart it in
order to have the server come up correctly the first time.  At least I
did.  After that it will come up whenever it is needed and exit after
it has idled for the timeout period specified on the command line.
Earlier versions of aceserver had problems with the so-called "phoenix
effect" on certain platforms, a phenonemon which caused the server to
be immediately relaunched after exiting, but the patchfile contains a
fix for that problem.


USING ACEPERL

A. Read the copious documentation
   
   perldoc Ace


B. Review the examples

A few useful examples can be found in the "examples" subdirectory.
Among these is a script called "ace.pl", which implements a tace-like
interface to a local or remote ace database.  If you have the Perl
Term::readline module installed, it gives you command-line editing,
completion, and history.

There is also family of CGI scripts that run on top of AcePerl to give
a WebAce-like interface to Ace (it is not as feature-full as WebAce,
but it is probably easier to set up and run).  You can find the
package at this URL:

  http://stein.cshl.org/AcePerl/AceBrowser
	

Lincoln Stein
lstein@cshl.org

September 17, 1998

